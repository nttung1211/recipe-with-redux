(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"7Lvj":function(e,i,t){"use strict";t.r(i);var r=t("3Pt+"),n=t("tyNb"),c=t("IzEk"),o=t("lJxs"),s=t("fXoL"),b=t("qXBG");let a=(()=>{class e{constructor(e,i){this.authService=e,this.router=i}canActivate(e,i){return this.authService.user.pipe(Object(c.a)(1),Object(o.a)(e=>!!e||this.router.createUrlTree(["/auth"])))}}return e.\u0275fac=function(i){return new(i||e)(s.Qb(b.a),s.Qb(n.c))},e.\u0275prov=s.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=t("ceC1"),u=t("ofXK");const d=function(e){return[e]};let l=(()=>{class e{constructor(e){this.recipeSercive=e}ngOnInit(){}}return e.\u0275fac=function(i){return new(i||e)(s.Jb(p.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-recipe-item"]],inputs:{recipe:["thisRecipe","recipe"]},decls:8,vars:8,consts:[["routerLinkActive","active",1,"list-group-item","clearfix",3,"routerLink"],[1,"pull-left"],[1,"list-group-item-heading"],[1,"list-group-item-text"],[1,"pull-right"],[1,"img-responsive",2,"max-height","50px",3,"src","alt","id"]],template:function(e,i){1&e&&(s.Mb(0,"a",0),s.Mb(1,"div",1),s.Mb(2,"h4",2),s.ic(3),s.Lb(),s.Mb(4,"p",3),s.ic(5),s.Lb(),s.Lb(),s.Mb(6,"span",4),s.Kb(7,"img",5),s.Lb(),s.Lb()),2&e&&(s.Xb("routerLink",s.ac(6,d,i.recipe.id)),s.zb(3),s.jc(i.recipe.name),s.zb(2),s.jc(i.recipe.description),s.zb(2),s.Yb("alt",i.recipe.name),s.Yb("id",i.recipe.name),s.Xb("src",i.recipe.imagePath,s.fc))},directives:[n.f,n.e],styles:[""]}),e})();function m(e,i){1&e&&s.Kb(0,"app-recipe-item",4),2&e&&s.Xb("thisRecipe",i.$implicit)}const h=function(){return["new"]};let g=(()=>{class e{constructor(e){this.recipeService=e}ngOnInit(){this.recipes=this.recipeService.getRecipes(),this.subscription=this.recipeService.recipesChanged.subscribe(()=>{this.recipes=this.recipeService.getRecipes()})}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(i){return new(i||e)(s.Jb(p.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-recipe-list"]],decls:8,vars:3,consts:[[1,"row"],[1,"col-xs-12"],[1,"btn","btn-success",3,"routerLink"],[3,"thisRecipe",4,"ngFor","ngForOf"],[3,"thisRecipe"]],template:function(e,i){1&e&&(s.Mb(0,"div",0),s.Mb(1,"div",1),s.Mb(2,"div",2),s.ic(3,"New Recipe"),s.Lb(),s.Lb(),s.Lb(),s.Kb(4,"hr"),s.Mb(5,"div",0),s.Mb(6,"div",1),s.hc(7,m,1,1,"app-recipe-item",3),s.Lb(),s.Lb()),2&e&&(s.zb(2),s.Xb("routerLink",s.Zb(2,h)),s.zb(5),s.Xb("ngForOf",i.recipes))},directives:[n.d,u.i,l],styles:[""]}),e})(),v=(()=>{class e{constructor(e){this.recipeService=e}ngOnInit(){}}return e.\u0275fac=function(i){return new(i||e)(s.Jb(p.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-recipes"]],decls:5,vars:0,consts:[[1,"row"],[1,"col-md-5"],[1,"col-md-7"]],template:function(e,i){1&e&&(s.Mb(0,"div",0),s.Mb(1,"div",1),s.Kb(2,"app-recipe-list"),s.Lb(),s.Mb(3,"div",2),s.Kb(4,"router-outlet"),s.Lb(),s.Lb())},directives:[g,n.h],styles:[""]}),e})(),f=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=s.Db({type:e,selectors:[["app-recipe-start"]],decls:2,vars:0,template:function(e,i){1&e&&(s.Mb(0,"h3"),s.ic(1,"Select a recipe to see its details!"),s.Lb())},styles:[""]}),e})();const L=["ingWrapper"],M=function(e){return{lastIng:e}};function w(e,i){if(1&e){const e=s.Nb();s.Mb(0,"div",19),s.Mb(1,"div",20),s.Kb(2,"input",21),s.Lb(),s.Mb(3,"div",22),s.Kb(4,"input",23),s.Lb(),s.Mb(5,"div",22),s.Mb(6,"button",6),s.Ub("click",(function(){s.ec(e);const t=i.index;return s.Wb().onDelIng(t)})),s.ic(7,"x"),s.Lb(),s.Lb(),s.Lb()}if(2&e){const e=i.last;s.Xb("formGroupName",i.index)("ngClass",s.ac(2,M,e))}}let S=(()=>{class e{constructor(e,i,t){this.route=e,this.router=i,this.recipeService=t,this.editMode=!1}ngOnInit(){this.route.params.subscribe(e=>{e.id&&(this.recipeId=+e.id,this.editMode=!0),this.initForm()})}initForm(){let e="",i="",t="",n=new r.b([]);if(this.editMode){const c=this.recipeService.getRecipe(this.recipeId);e=c.name,i=c.imagePath,t=c.description,c.ingredients&&c.ingredients.forEach(e=>{n.push(new r.f({name:new r.d(e.name,r.r.required),amount:new r.d(e.amount,[r.r.required,r.r.pattern(/^[1-9]+[0-9]*$/)])}))})}this.recipeForm=new r.f({name:new r.d(e,[r.r.required]),imagePath:new r.d(i,[r.r.required]),description:new r.d(t,[r.r.required]),ingredients:n})}onAddIng(){this.recipeForm.get("ingredients").push(new r.f({name:new r.d(null,r.r.required),amount:new r.d(null,[r.r.required,r.r.pattern(/^[1-9]+[0-9]*$/)])})),setTimeout(()=>{this.inWrapper.nativeElement.querySelector(".lastIng input").focus()})}onDelIng(e){this.recipeForm.get("ingredients").removeAt(e)}onDelAllIng(){this.recipeForm.get("ingredients").clear()}onSubmit(){this.recipeForm.invalid||(console.log(this.recipeForm),this.editMode?this.recipeService.update(this.recipeId,Object.assign({id:this.recipeId},this.recipeForm.value)):(this.recipeId=this.recipeService.generateID(),this.recipeService.add(Object.assign({id:this.recipeId},this.recipeForm.value))),this.router.navigate(["/recipes",this.recipeId]))}onCancel(){this.router.navigate(["/recipes"])}onDelete(){this.recipeService.delete(this.recipeId),this.router.navigate(["/recipes"])}}return e.\u0275fac=function(i){return new(i||e)(s.Jb(n.a),s.Jb(n.c),s.Jb(p.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-recipe-edit"]],viewQuery:function(e,i){var t;1&e&&s.mc(L,!0),2&e&&s.bc(t=s.Vb())&&(i.inWrapper=t.first)},decls:35,vars:5,consts:[[1,"row"],[1,"col-sm-12"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["for","name"],["type","text","name","name","id","name","formControlName","name",1,"form-control"],["for","imagePath"],["type","text","name","imagePath","id","imagePath","formControlName","imagePath",1,"form-control"],["imagePathInp",""],[1,"img-responsive",3,"src","alt"],["for","description"],["type","text","name","description","id","description","rows","6","formControlName","description",1,"form-control"],["formArrayName","ingredients",1,"form-group"],["ingWrapper",""],["class","row","style","margin-bottom: 10px;",3,"formGroupName","ngClass",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success",3,"click"],[1,"row",2,"margin-bottom","10px",3,"formGroupName","ngClass"],[1,"col-sm-8"],["type","text","formControlName","name",1,"form-control"],[1,"col-sm-2"],["type","number","formControlName","amount",1,"form-control"]],template:function(e,i){if(1&e&&(s.Mb(0,"div",0),s.Mb(1,"div",1),s.Mb(2,"form",2),s.Ub("ngSubmit",(function(){return i.onSubmit()})),s.Mb(3,"div",3),s.Mb(4,"button",4),s.ic(5,"Save"),s.Lb(),s.Mb(6,"button",5),s.Ub("click",(function(){return i.onCancel()})),s.ic(7,"Cancel"),s.Lb(),s.Mb(8,"button",6),s.Ub("click",(function(){return i.onDelete()})),s.ic(9,"Delete"),s.Lb(),s.Lb(),s.Mb(10,"div",3),s.Mb(11,"label",7),s.ic(12,"Name: "),s.Lb(),s.Kb(13,"input",8),s.Lb(),s.Mb(14,"div",3),s.Mb(15,"label",9),s.ic(16,"Image URL: "),s.Lb(),s.Kb(17,"input",10,11),s.Lb(),s.Mb(19,"div",3),s.Kb(20,"img",12),s.Lb(),s.Mb(21,"div",3),s.Mb(22,"label",13),s.ic(23,"Description: "),s.Lb(),s.Kb(24,"textarea",14),s.Lb(),s.Mb(25,"div",15,16),s.Mb(27,"label"),s.ic(28,"Ingredients: "),s.Lb(),s.hc(29,w,8,4,"div",17),s.Lb(),s.Mb(30,"div",3),s.Mb(31,"button",18),s.Ub("click",(function(){return i.onAddIng()})),s.ic(32,"Add"),s.Lb(),s.Mb(33,"button",6),s.Ub("click",(function(){return i.onDelAllIng()})),s.ic(34,"Delete all"),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb()),2&e){const e=s.cc(18);s.zb(2),s.Xb("formGroup",i.recipeForm),s.zb(2),s.Xb("disabled",i.recipeForm.invalid),s.zb(16),s.Xb("src",e.value,s.fc)("alt",i.recipeForm.value.name),s.zb(9),s.Xb("ngForOf",i.recipeForm.get("ingredients").controls)}},directives:[r.s,r.k,r.g,r.a,r.j,r.e,r.c,u.i,r.h,u.h,r.n],styles:[".btn[_ngcontent-%COMP%]{margin-right:10px}.ng-invalid[_ngcontent-%COMP%]:not(form):not(div).ng-touched{border:1px solid red}"]}),e})();var y=t("MJzj"),I=t("3V6w");function k(e,i){if(1&e&&(s.Mb(0,"li",11),s.ic(1),s.Lb()),2&e){const e=i.$implicit;s.zb(1),s.lc(" ",e.name," - ",e.amount," ")}}const F=function(){return["edit"]};let x=(()=>{class e{constructor(e,i,t,r){this.recipeService=e,this.ingredientService=i,this.activatedRoute=t,this.router=r}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.recipe=this.recipeService.getRecipe(+e.id)})}onSendToSL(){this.recipe.ingredients.forEach(e=>{this.ingredientService.add(e)})}onDelete(){this.recipeService.delete(this.recipe.id),this.router.navigate(["/recipes"])}}return e.\u0275fac=function(i){return new(i||e)(s.Jb(p.a),s.Jb(y.a),s.Jb(n.a),s.Jb(n.c))},e.\u0275cmp=s.Db({type:e,selectors:[["app-recipe-detail"]],decls:30,vars:7,consts:[[1,"row"],[1,"col-xs-12"],[1,"img-responsive",2,"max-height","300px",3,"src","alt"],["appDropdown","",1,"btn-group"],[1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],[1,"dropdown-menu"],[3,"click"],[3,"routerLink"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(e,i){1&e&&(s.Mb(0,"div",0),s.Mb(1,"div",1),s.Kb(2,"img",2),s.Lb(),s.Lb(),s.Mb(3,"div",0),s.Mb(4,"div",1),s.Mb(5,"h1"),s.ic(6),s.Lb(),s.Lb(),s.Lb(),s.Mb(7,"div",0),s.Mb(8,"div",1),s.Mb(9,"div",3),s.Mb(10,"button",4),s.ic(11," Manage recipe "),s.Kb(12,"span",5),s.Lb(),s.Mb(13,"ul",6),s.Mb(14,"li"),s.Mb(15,"a",7),s.Ub("click",(function(){return i.onSendToSL()})),s.ic(16,"To shopping list"),s.Lb(),s.Lb(),s.Mb(17,"li"),s.Mb(18,"a",8),s.ic(19,"Edit recipe"),s.Lb(),s.Lb(),s.Mb(20,"li"),s.Mb(21,"a",7),s.Ub("click",(function(){return i.onDelete()})),s.ic(22,"Delete recipe"),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Mb(23,"div",0),s.Mb(24,"div",1),s.ic(25),s.Lb(),s.Lb(),s.Mb(26,"div",0),s.Mb(27,"div",1),s.Mb(28,"div",9),s.hc(29,k,2,2,"li",10),s.Lb(),s.Lb(),s.Lb()),2&e&&(s.zb(2),s.Xb("src",i.recipe.imagePath,s.fc)("alt",i.recipe.name),s.zb(4),s.jc(i.recipe.name),s.zb(12),s.Xb("routerLink",s.Zb(6,F)),s.zb(7),s.kc(" ",i.recipe.description," "),s.zb(4),s.Xb("ngForOf",i.recipe.ingredients))},directives:[I.a,n.f,u.i],styles:[""]}),e})();var D=t("GXvH");let O=(()=>{class e{constructor(e,i){this.dataStorageService=e,this.recipeService=i}resolve(e,i){const t=this.recipeService.getRecipes();return 0===t.length?this.dataStorageService.fetchRecipes():t}}return e.\u0275fac=function(i){return new(i||e)(s.Qb(D.a),s.Qb(p.a))},e.\u0275prov=s.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const z=[{path:"",canActivate:[a],component:v,children:[{path:"",component:f},{path:"new",component:S},{path:":id",component:x,resolve:[O]},{path:":id/edit",component:S,resolve:[O]}]}];let C=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(i){return new(i||e)},imports:[[n.g.forChild(z)],n.g]}),e})();var X=t("PCNd");t.d(i,"RecipesModule",(function(){return R}));let R=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(i){return new(i||e)},imports:[[r.i,r.p,C,X.a]]}),e})()}}]);